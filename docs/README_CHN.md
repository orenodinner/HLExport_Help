# HLExport — 使用指南  
*最后更新：2025‑05‑06*

---

## 0. 权限
| 准备 | 说明 |
|------|------|
| **健康数据访问权限** | 第一次启动应用时会弹出对话框，请允许**全部读取**。若在 iOS 18 及以上要记录 **State of Mind（心情状态）**，同时勾选**写入**权限。 |
| **通知权限** | 若需要每日心情提醒，请授予通知权限。之后可在 **设置 > 通知** 中修改。 |

---

## 1. 在主界面获取健康数据
1. **设置时间范围**  
   - 在 *开始日期* / *结束日期* 选择日期。  
   - 修改范围后，天数会自动保存，下次启动时作为默认值。  
2. 点击 **分享健康数据（原始文本）** 或 **获取健康数据**  
   - 将显示进度条，加载期间按钮变灰。  
   - 如需取消，点击 **取消数据获取**。  
3. 获取完成后可执行的操作  
   | 按钮 | 动作 |
   |------|------|
   | **分享 JSON 数据** | 生成 JSON 文件并打开系统分享面板。 |
   | **复制 JSON 数据到剪贴板** | 直接将 JSON 复制到剪贴板。 |
   | 处理过程中出现的 **取消** 按钮 | 中断当前的转换或复制。 |

> **提示：** 未获取数据时，共享按钮会自动禁用。

---

## 2. 记录当前心情
1. 在主界面点击 **记录当前心情**。  
2. 从 7 级列表中选择心情，点击 **保存** 完成记录。  

---

## 3. 设置 / 删除每日提醒
### 设置
1. 进入 **设置** → *每日记录提醒* 区域  
2. 在 **通知时间** 选择时刻  
3. 点击 **设定此时间的通知**  
   - 成功提示后，时间会被保存。

### 删除
1. 在同一区域点击 **删除通知设置**  
2. 所有已预约通知和保存时间将被清除。

---

## 4. 修改默认获取天数
1. 在 **设置** → *健康数据默认获取天数*  
2. 在文本框输入天数  
   - 输入小于 0 或大于 739 374 天（相当于公元前）会弹出警告并恢复原值。  
3. 输入完成后自动保存，在主界面成为默认范围。

---

## 5. 查看调试日志
1. 在主界面底部 *调试日志* 区域，开启 **显示调试日志**  
2. 获取或分享数据时的内部日志实时显示  
3. 点击 **清除调试日志** 可重置内容  
   - 日志过多时，性能可能下降。

---

## 6. 常见问题 (FAQ)

| 问题 | 解答 |
|------|------|
| **误拒了权限弹窗** | 可在 **设置 > 隐私与安全 > 健康 > HLExport** 再次授权。 |
| **提示无法写入当前心情** | iOS 18 以下系统不支持写入 State of Mind。 |
| **选择大范围日期时报错** | 可能超出 iOS 返回的样本数量上限，请拆分时间段多次获取。 |
| **分享 JSON 后文件消失** | 如在分享面板未选择目标 App，临时目录会被系统删除。请重新分享并保存至“文件”或云端。 |
| **收不到通知** | 检查通知权限和“专注模式”设置。删除后重新设置通常可解决。 |

---

## 7. 故障排查

| 症状 | 解决方法 |
|------|----------|
| **“未授予健康数据访问权限”** | 主界面会出现 *授权访问健康数据* 按钮，点击重新请求权限。 |
| **一直显示“正在处理…”** | 另一个任务（转换、复制等）正在进行，完成或取消后再试。 |
| **应用似乎卡住** | 打开调试日志查看进度；在低电量模式下处理速度可能变慢。 |

[PrivacyPolicy](docs/PrivacyPolicy_CHN.md)